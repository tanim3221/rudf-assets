!function($){jQuery.fn.rPage=function(){for(var $this=$(this),i=0,max=$this.length;i<max;i++)new rPage($($this[i]));function rPage($container){var resize_timer;this.label=function(){var active_index=this.els.filter(".active").index(),rp=this;this.els.each((function(){0==rp.isNextOrPrevLink($(this))?$(this).addClass("page-away-"+Math.abs(active_index-$(this).index()).toString()):$(this).index()>active_index?$(this).addClass("right-etc"):$(this).addClass("left-etc")}))},this.makeResponsive=function(){this.reset();for(var width=this.calculateWidth();width>this.els.parent().parent().width()-10;){var did_remove;if(0==this.removeOne())break;width=this.calculateWidth()}},this.isNextOrPrevLink=function(element){return element.hasClass("pagination-prev")||element.hasClass("pagination-next")||"»"==element.text()||"«"==element.text()},this.isRemovable=function(element){if(this.isNextOrPrevLink(element))return!1;var index=this.els.filter(element).index();return 1!=index&&!this.isNextOrPrevLink($container.find("li").eq(index+1))&&"..."!=element.text()},this.removeOne=function(){for(var active_index=this.els.filter(".active").index(),farthest_index=$container.find("li").length-1,next=active_index+1,prev=active_index-1,i=farthest_index-1;i>0;i--){var candidates,candidate=this.els.filter(".page-away-"+i.toString()).filter((function(){return"none"!=this.style.display}));if(candidate.length>0)for(var j=0;j<candidate.length;j++){var candid_candidate=candidate.eq(j);if(this.isRemovable(candid_candidate))return candid_candidate.css("display","none"),this.needsEtcSign(active_index,farthest_index-1)&&this.els.eq(farthest_index-2).before("<li class='disabled removable'><span>...</span></li>"),this.needsEtcSign(1,active_index)&&this.els.eq(1).after("<li class='disabled removable'><span>...</span></li>"),!0}}return!1},this.needsEtcSign=function(el1_index,el2_index){if(el2_index-el1_index<=1)return!1;for(var hasEtcSign=!1,hasHiddenElement=!1,i=el1_index+1;i<el2_index;i++){var el=$container.find("li").eq(i);"none"==el.css("display")&&(hasHiddenElement=!0),"..."==el.text()&&(hasEtcSign=!0)}return 1==hasHiddenElement&&0==hasEtcSign},this.reset=function(){for(var i=0;i<this.els.length;i++)this.els.eq(i).css("display","inline");$container.find("li").filter(".removable").remove()},this.calculateWidth=function(){for(var width=0,i=0;i<$container.find("li").length;i++)"none"!=$container.find("li").eq(i).css("display")&&($container.find("li").eq(i).children("a").eq(0).length>0&&(width+=$container.find("li").eq(i).children("a").eq(0).outerWidth()),$container.find("li").eq(i).children("span").eq(0).length>0&&(width+=$container.find("li").eq(i).children("span").eq(0).outerWidth()));return width},this.els=$container.find("li"),this.label(),this.makeResponsive(),$(window).resize($.proxy((function(){clearTimeout(resize_timer),resize_timer=setTimeout($.proxy((function(){this.makeResponsive()}),this),100)}),this))}}}(jQuery);